<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>SWIL</title>
<style>
body {
  font-family: Arial, sans-serif;
  background: url('https://i.pinimg.com/736x/68/aa/c8/68aac8479ce6bd16304fda727f9c2486.jpg') no-repeat center center fixed;
  background-size: cover;
}
#posts { max-width: 800px; margin: 20px auto; }
.post, .comment { background: rgba(255,255,255,0.9); padding: 10px; border-radius: 8px; margin: 10px 0; }
.comment.admin-header { font-weight: bold; color: red; }
</style>
</head>
<body>
<h1>SWIL</h1>
<h2>Sharing - What - I - Like</h2>

<div id="login-section">
  <select id="role-select" onchange="togglePasswordField()">
    <option value="guest">Guest</option>
    <option value="admin">Admin</option>
  </select>
  <div id="password-div" style="display:none;">
    <input type="password" id="admin-password" placeholder="Admin password">
  </div>
  <button onclick="login()">Login</button>
  <div id="role-status">Role: guest</div>
</div>

<div id="post-section" style="display:none;">
  <textarea id="post-text" placeholder="Write a post..."></textarea>
  <input type="file" id="post-file">
  <button onclick="createPost()">Post</button>
</div>

<div id="posts"></div>

<script type="module">
import { initializeApp } from "https://www.gstatic.com/firebasejs/9.22.1/firebase-app.js";
import { getDatabase, ref, push, set, onValue } from "https://www.gstatic.com/firebasejs/9.22.1/firebase-database.js";
import { getStorage, ref as sRef, uploadBytes, getDownloadURL } from "https://www.gstatic.com/firebasejs/9.22.1/firebase-storage.js";

const firebaseConfig = {
  apiKey: "AIzaSyAzZWzC7n-XKAdlCLrGM3TPDl9Uo5rUKzY",
  authDomain: "swil-eb81a.firebaseapp.com",
  databaseURL: "https://swil-eb81a-default-rtdb.firebaseio.com",
  projectId: "swil-eb81a",
  storageBucket: "swil-eb81a.appspot.com",
  messagingSenderId: "964324457027",
  appId: "1:964324457027:web:9c1e7f6331a8c59b52f2f6"
};

const app = initializeApp(firebaseConfig);
const db = getDatabase(app);
const storage = getStorage(app);

let role = "guest";

// Toggle Password Input
function togglePasswordField() {
  const selectedRole = document.getElementById("role-select").value;
  document.getElementById("password-div").style.display =
    selectedRole === "admin" ? "block" : "none";
}

// Login Function
function login() {
  const selectedRole = document.getElementById("role-select").value;
  const password = document.getElementById("admin-password").value;

  if (selectedRole === "admin" && password === "didifuckingstutter") {
    role = "admin";
    document.getElementById("post-section").style.display = "block";
    alert("âœ… Logged in as Admin");
  } else {
    role = "guest";
    document.getElementById("post-section").style.display = "none";
    alert("ðŸ‘¤ Logged in as Guest");
  }

  document.getElementById("role-status").innerText = "Role: " + role;
}

// ðŸ”‘ Expose to global so HTML buttons can call them
window.togglePasswordField = togglePasswordField;
window.login = login;


window.createPost = async function() {
  if (role !== "admin") return;
  const text = document.getElementById("post-text").value.trim();
  const file = document.getElementById("post-file").files[0];
  let fileUrl = "";

  if (file) {
    const fileRef = sRef(

